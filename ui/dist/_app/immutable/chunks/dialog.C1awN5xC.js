import{K as Y,L as Z,M as $,s as ee,F as te,H as ne,I as oe,J as se,k as re}from"./scheduler.DvhgI56V.js";import{S as ie,i as ce,t as ae,b as le}from"./index.cJPS-mTp.js";import{d as W,w as ue}from"./index.ClmdFyi7.js";import{t as V,o as de,w as fe,d as pe,f as ge,m as v,h as K,i as P,k as M,s as B,j as H,l as A,p as Oe,n as ye,q as L,r as E,v as ke,x as me}from"./events.CRn_k7UJ.js";import{h as q,u as be,c as Ce,g as ve,a as Ee,r as _e,b as he,d as Fe}from"./updater.iZaATlbZ.js";const{name:_}=ye("dialog"),Se={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Te=["content","title","description"];function Ae(o){const n={...Se,...o},i=V(de(n,"ids")),{preventScroll:c,closeOnEscape:r,closeOnOutsideClick:f,role:h,portal:O,forceVisible:y,openFocus:F,closeFocus:p,onOutsideClick:k}=i,m=fe.writable(null),l=V({...pe(Te),...n.ids}),S=n.open??ue(n.defaultOpen),u=ge(S,n==null?void 0:n.onOpenChange),d=W([u,y],([e,a])=>e||a);let b=E;function w(e){const a=e.currentTarget,s=e.currentTarget;!L(a)||!L(s)||(u.set(!0),m.set(s))}function t(){u.set(!1),q({prop:p.get(),defaultEl:m.get()})}const I=v(_("trigger"),{stores:[u],returned:([e])=>({"aria-haspopup":"dialog","aria-expanded":e,type:"button"}),action:e=>({destroy:K(P(e,"click",s=>{w(s)}),P(e,"keydown",s=>{s.key!==M.ENTER&&s.key!==M.SPACE||(s.preventDefault(),w(s))}))})}),N=v(_("overlay"),{stores:[d,u],returned:([e,a])=>({hidden:e?void 0:!0,tabindex:-1,style:B({display:e?void 0:"none"}),"aria-hidden":!0,"data-state":a?"open":"closed"}),action:e=>{let a=E;if(r.get()){const s=H(e,{handler:()=>{t()}});s&&s.destroy&&(a=s.destroy)}return{destroy(){a()}}}}),G=v(_("content"),{stores:[d,l.content,l.description,l.title,u],returned:([e,a,s,T,g])=>({id:a,role:h.get(),"aria-describedby":s,"aria-labelledby":T,"aria-modal":e?"true":void 0,"data-state":g?"open":"closed",tabindex:-1,hidden:e?void 0:!0,style:B({display:e?void 0:"none"})}),action:e=>{let a=E,s=E;const T=K(A([u,f,r],([g,R,D])=>{if(!g)return;const C=Ce({immediate:!1,escapeDeactivates:D,clickOutsideDeactivates:R,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e});a=C.activate,s=C.deactivate;const x=C.useFocusTrap(e);return x&&x.destroy?x.destroy:C.deactivate}),A([f,u],([g,R])=>be(e,{open:R,closeOnInteractOutside:g,onClose(){t()},shouldCloseOnInteractOutside(D){var C;return(C=k.get())==null||C(D),!D.defaultPrevented}}).destroy),A([r],([g])=>g?H(e,{handler:t}).destroy:E),A([d],([g])=>{Y().then(()=>{g?a():s()})}));return{destroy:()=>{b(),T()}}}}),J=v(_("portalled"),{stores:O,returned:e=>({"data-portal":Oe(e)}),action:e=>{const a=A([O],([s])=>{if(s===null)return E;const T=ve(e,s);return T===null?E:Ee(e,T).destroy});return{destroy(){a()}}}}),z=v(_("title"),{stores:[l.title],returned:([e])=>({id:e})}),Q=v(_("description"),{stores:[l.description],returned:([e])=>({id:e})}),X=v(_("close"),{returned:()=>({type:"button"}),action:e=>({destroy:K(P(e,"click",()=>{t()}),P(e,"keydown",s=>{s.key!==M.SPACE&&s.key!==M.ENTER||(s.preventDefault(),t())}))})});return A([u,c],([e,a])=>{if(ke){if(a&&e&&(b=_e()),e){const s=document.getElementById(l.content.get());q({prop:F.get(),defaultEl:s})}return()=>{y.get()||b()}}}),{ids:l,elements:{content:G,trigger:I,title:z,description:Q,overlay:N,close:X,portalled:J},states:{open:u},options:i}}function j(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function we(o){const{NAME:n,PARTS:i}=j(),c=me(n,i),r={...Ae({...he(o),role:"dialog",forceVisible:!0}),getAttrs:c};return Z(n,r),{...r,updateOption:Fe(r.options)}}function Ve(){const{NAME:o}=j();return $(o)}const De=o=>({ids:o&1}),U=o=>({ids:o[0]});function Pe(o){let n;const i=o[12].default,c=te(i,o,o[11],U);return{c(){c&&c.c()},l(r){c&&c.l(r)},m(r,f){c&&c.m(r,f),n=!0},p(r,[f]){c&&c.p&&(!n||f&2049)&&ne(c,i,r,r[11],n?se(i,r[11],f,De):oe(r[11]),U)},i(r){n||(ae(c,r),n=!0)},o(r){le(c,r),n=!1},d(r){c&&c.d(r)}}}function Me(o,n,i){let c,{$$slots:r={},$$scope:f}=n,{preventScroll:h=void 0}=n,{closeOnEscape:O=void 0}=n,{closeOnOutsideClick:y=void 0}=n,{portal:F=void 0}=n,{open:p=void 0}=n,{onOpenChange:k=void 0}=n,{openFocus:m=void 0}=n,{closeFocus:l=void 0}=n,{onOutsideClick:S=void 0}=n;const{states:{open:u},updateOption:d,ids:b}=we({closeOnEscape:O,preventScroll:h,closeOnOutsideClick:y,portal:F,forceVisible:!0,defaultOpen:p,openFocus:m,closeFocus:l,onOutsideClick:S,onOpenChange:({next:t})=>(p!==t&&(k==null||k(t),i(2,p=t)),t)}),w=W([b.content,b.description,b.title],([t,I,N])=>({content:t,description:I,title:N}));return re(o,w,t=>i(0,c=t)),o.$$set=t=>{"preventScroll"in t&&i(3,h=t.preventScroll),"closeOnEscape"in t&&i(4,O=t.closeOnEscape),"closeOnOutsideClick"in t&&i(5,y=t.closeOnOutsideClick),"portal"in t&&i(6,F=t.portal),"open"in t&&i(2,p=t.open),"onOpenChange"in t&&i(7,k=t.onOpenChange),"openFocus"in t&&i(8,m=t.openFocus),"closeFocus"in t&&i(9,l=t.closeFocus),"onOutsideClick"in t&&i(10,S=t.onOutsideClick),"$$scope"in t&&i(11,f=t.$$scope)},o.$$.update=()=>{o.$$.dirty&4&&p!==void 0&&u.set(p),o.$$.dirty&8&&d("preventScroll",h),o.$$.dirty&16&&d("closeOnEscape",O),o.$$.dirty&32&&d("closeOnOutsideClick",y),o.$$.dirty&64&&d("portal",F),o.$$.dirty&256&&d("openFocus",m),o.$$.dirty&512&&d("closeFocus",l),o.$$.dirty&1024&&d("onOutsideClick",S)},[c,w,p,h,O,y,F,k,m,l,S,f,r]}class Be extends ie{constructor(n){super(),ce(this,n,Me,Pe,ee,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}export{Be as D,Ve as g};
