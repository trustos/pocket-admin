import{L as Y,M as Z,N as $,s as ee,F as te,H as ne,I as oe,J as se,k as re}from"./scheduler.Ch08FvRr.js";import{S as ie,i as ce,t as ae,b as le}from"./index.BhaZ9Ew-.js";import{d as j,w as ue}from"./index.DVwkszYu.js";import{o as de,w as fe,m as E,e as x,d as P,k as M,s as B,u as H,f as A,p as pe,h as ge,i as K,n as v,j as Oe,l as ye}from"./events.3g1COGhw.js";import{t as L,g as ke,o as me,h as U,u as be,c as Ce,a as Ee,b as ve,r as _e,d as he,e as Fe}from"./updater.1Ual1sY_.js";const{name:_}=ge("dialog"),Se={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Te=["content","title","description"];function Ae(o){const n={...Se,...o},i=L(de(n,"ids")),{preventScroll:c,closeOnEscape:r,closeOnOutsideClick:f,role:h,portal:O,forceVisible:y,openFocus:F,closeFocus:p,onOutsideClick:k}=i,m=fe.writable(null),l=L({...ke(Te),...n.ids}),S=n.open??ue(n.defaultOpen),u=me(S,n==null?void 0:n.onOpenChange),d=j([u,y],([e,a])=>e||a);let b=v;function w(e){const a=e.currentTarget,s=e.currentTarget;!K(a)||!K(s)||(u.set(!0),m.set(s))}function t(){u.set(!1),U({prop:p.get(),defaultEl:m.get()})}const N=E(_("trigger"),{stores:[u],returned:([e])=>({"aria-haspopup":"dialog","aria-expanded":e,type:"button"}),action:e=>({destroy:x(P(e,"click",s=>{w(s)}),P(e,"keydown",s=>{s.key!==M.ENTER&&s.key!==M.SPACE||(s.preventDefault(),w(s))}))})}),I=E(_("overlay"),{stores:[d,u],returned:([e,a])=>({hidden:e?void 0:!0,tabindex:-1,style:B({display:e?void 0:"none"}),"aria-hidden":!0,"data-state":a?"open":"closed"}),action:e=>{let a=v;if(r.get()){const s=H(e,{handler:()=>{t()}});s&&s.destroy&&(a=s.destroy)}return{destroy(){a()}}}}),G=E(_("content"),{stores:[d,l.content,l.description,l.title,u],returned:([e,a,s,T,g])=>({id:a,role:h.get(),"aria-describedby":s,"aria-labelledby":T,"aria-modal":e?"true":void 0,"data-state":g?"open":"closed",tabindex:-1,hidden:e?void 0:!0,style:B({display:e?void 0:"none"})}),action:e=>{let a=v,s=v;const T=x(A([u,f,r],([g,R,D])=>{if(!g)return;const C=Ce({immediate:!1,escapeDeactivates:D,clickOutsideDeactivates:R,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e});a=C.activate,s=C.deactivate;const V=C.useFocusTrap(e);return V&&V.destroy?V.destroy:C.deactivate}),A([f,u],([g,R])=>be(e,{open:R,closeOnInteractOutside:g,onClose(){t()},shouldCloseOnInteractOutside(D){var C;return(C=k.get())==null||C(D),!D.defaultPrevented}}).destroy),A([r],([g])=>g?H(e,{handler:t}).destroy:v),A([d],([g])=>{Y().then(()=>{g?a():s()})}));return{destroy:()=>{b(),T()}}}}),J=E(_("portalled"),{stores:O,returned:e=>({"data-portal":pe(e)}),action:e=>{const a=A([O],([s])=>{if(s===null)return v;const T=Ee(e,s);return T===null?v:ve(e,T).destroy});return{destroy(){a()}}}}),z=E(_("title"),{stores:[l.title],returned:([e])=>({id:e})}),Q=E(_("description"),{stores:[l.description],returned:([e])=>({id:e})}),X=E(_("close"),{returned:()=>({type:"button"}),action:e=>({destroy:x(P(e,"click",()=>{t()}),P(e,"keydown",s=>{s.key!==M.SPACE&&s.key!==M.ENTER||(s.preventDefault(),t())}))})});return A([u,c],([e,a])=>{if(Oe){if(a&&e&&(b=_e()),e){const s=document.getElementById(l.content.get());U({prop:F.get(),defaultEl:s})}return()=>{y.get()||b()}}}),{ids:l,elements:{content:G,trigger:N,title:z,description:Q,overlay:I,close:X,portalled:J},states:{open:u},options:i}}function q(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function we(o){const{NAME:n,PARTS:i}=q(),c=ye(n,i),r={...Ae({...he(o),role:"dialog",forceVisible:!0}),getAttrs:c};return Z(n,r),{...r,updateOption:Fe(r.options)}}function Be(){const{NAME:o}=q();return $(o)}const De=o=>({ids:o&1}),W=o=>({ids:o[0]});function Pe(o){let n;const i=o[12].default,c=te(i,o,o[11],W);return{c(){c&&c.c()},l(r){c&&c.l(r)},m(r,f){c&&c.m(r,f),n=!0},p(r,[f]){c&&c.p&&(!n||f&2049)&&ne(c,i,r,r[11],n?se(i,r[11],f,De):oe(r[11]),W)},i(r){n||(ae(c,r),n=!0)},o(r){le(c,r),n=!1},d(r){c&&c.d(r)}}}function Me(o,n,i){let c,{$$slots:r={},$$scope:f}=n,{preventScroll:h=void 0}=n,{closeOnEscape:O=void 0}=n,{closeOnOutsideClick:y=void 0}=n,{portal:F=void 0}=n,{open:p=void 0}=n,{onOpenChange:k=void 0}=n,{openFocus:m=void 0}=n,{closeFocus:l=void 0}=n,{onOutsideClick:S=void 0}=n;const{states:{open:u},updateOption:d,ids:b}=we({closeOnEscape:O,preventScroll:h,closeOnOutsideClick:y,portal:F,forceVisible:!0,defaultOpen:p,openFocus:m,closeFocus:l,onOutsideClick:S,onOpenChange:({next:t})=>(p!==t&&(k==null||k(t),i(2,p=t)),t)}),w=j([b.content,b.description,b.title],([t,N,I])=>({content:t,description:N,title:I}));return re(o,w,t=>i(0,c=t)),o.$$set=t=>{"preventScroll"in t&&i(3,h=t.preventScroll),"closeOnEscape"in t&&i(4,O=t.closeOnEscape),"closeOnOutsideClick"in t&&i(5,y=t.closeOnOutsideClick),"portal"in t&&i(6,F=t.portal),"open"in t&&i(2,p=t.open),"onOpenChange"in t&&i(7,k=t.onOpenChange),"openFocus"in t&&i(8,m=t.openFocus),"closeFocus"in t&&i(9,l=t.closeFocus),"onOutsideClick"in t&&i(10,S=t.onOutsideClick),"$$scope"in t&&i(11,f=t.$$scope)},o.$$.update=()=>{o.$$.dirty&4&&p!==void 0&&u.set(p),o.$$.dirty&8&&d("preventScroll",h),o.$$.dirty&16&&d("closeOnEscape",O),o.$$.dirty&32&&d("closeOnOutsideClick",y),o.$$.dirty&64&&d("portal",F),o.$$.dirty&256&&d("openFocus",m),o.$$.dirty&512&&d("closeFocus",l),o.$$.dirty&1024&&d("onOutsideClick",S)},[c,w,p,h,O,y,F,k,m,l,S,f,r]}class He extends ie{constructor(n){super(),ce(this,n,Me,Pe,ee,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}export{He as D,Be as g};
