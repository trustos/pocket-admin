import{s as qe,z as at,w as ae,Q as Ge,o as ie,R as ze,b as Ve,f as Y,S as oe,i as we,h as it,D as ot,E as st,F as ut,p as lt,v as ke,x as Se,O as Te}from"./scheduler.CJbnQW4F.js";import{S as ct,i as dt,t as ft,b as vt}from"./index.BMuCI7Kc.js";import{e as Fe,g as He,n as C,k as x,l as bt,o as Ee,p as ht,r as H,s as _,v as Pe,w as pt,x as mt,y as gt,z as yt,m as B,h as $,A as ee,B as Oe,D as De,E as j,F as wt,G as Tt,H as Et}from"./events.DwFK5ZIp.js";import{b as te}from"./entry.B4TdngOS.js";import{r as Ce,w as ge,d as Nt}from"./index.DHpBs5s-.js";/**
 * @license lucide-svelte v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function Re(r,e,t){const n=r.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function be(r){let e,t=[r[12]],n={};for(let a=0;a<t.length;a+=1)n=ae(n,t[a]);return{c(){e=Ge(r[11]),this.h()},l(a){e=ze(a,r[11],{}),Ve(e).forEach(Y),this.h()},h(){oe(e,n)},m(a,u){we(a,e,u)},p(a,u){oe(e,n=He(t,[u&32&&a[12]]))},d(a){a&&Y(e)}}}function Ae(r){let e=r[11],t,n=r[11]&&be(r);return{c(){n&&n.c(),t=ie()},l(a){n&&n.l(a),t=ie()},m(a,u){n&&n.m(a,u),we(a,t,u)},p(a,u){a[11]?e?qe(e,a[11])?(n.d(1),n=be(a),e=a[11],n.c(),n.m(t.parentNode,t)):n.p(a,u):(n=be(a),e=a[11],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=a[11])},d(a){a&&Y(t),n&&n.d(a)}}}function kt(r){let e,t,n,a,u,i=Fe(r[5]),f=[];for(let l=0;l<i.length;l+=1)f[l]=Ae(Re(r,i,l));const b=r[10].default,h=at(b,r,r[9],null);let w=[Ie,r[7],{width:r[2]},{height:r[2]},{stroke:r[1]},{"stroke-width":n=r[4]?Number(r[3])*24/Number(r[2]):r[3]},{class:a=r[6]("lucide-icon","lucide",r[0]?`lucide-${r[0]}`:"",r[8].class)}],m={};for(let l=0;l<w.length;l+=1)m=ae(m,w[l]);return{c(){e=Ge("svg");for(let l=0;l<f.length;l+=1)f[l].c();t=ie(),h&&h.c(),this.h()},l(l){e=ze(l,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var p=Ve(e);for(let c=0;c<f.length;c+=1)f[c].l(p);t=ie(),h&&h.l(p),p.forEach(Y),this.h()},h(){oe(e,m)},m(l,p){we(l,e,p);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(e,null);it(e,t),h&&h.m(e,null),u=!0},p(l,[p]){if(p&32){i=Fe(l[5]);let c;for(c=0;c<i.length;c+=1){const y=Re(l,i,c);f[c]?f[c].p(y,p):(f[c]=Ae(y),f[c].c(),f[c].m(e,t))}for(;c<f.length;c+=1)f[c].d(1);f.length=i.length}h&&h.p&&(!u||p&512)&&ot(h,b,l,l[9],u?ut(b,l[9],p,null):st(l[9]),null),oe(e,m=He(w,[Ie,p&128&&l[7],(!u||p&4)&&{width:l[2]},(!u||p&4)&&{height:l[2]},(!u||p&2)&&{stroke:l[1]},(!u||p&28&&n!==(n=l[4]?Number(l[3])*24/Number(l[2]):l[3]))&&{"stroke-width":n},(!u||p&257&&a!==(a=l[6]("lucide-icon","lucide",l[0]?`lucide-${l[0]}`:"",l[8].class)))&&{class:a}]))},i(l){u||(ft(h,l),u=!0)},o(l){vt(h,l),u=!1},d(l){l&&Y(e),lt(f,l),h&&h.d(l)}}}function St(r,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let a=ke(e,n),{$$slots:u={},$$scope:i}=e,{name:f=void 0}=e,{color:b="currentColor"}=e,{size:h=24}=e,{strokeWidth:w=2}=e,{absoluteStrokeWidth:m=!1}=e,{iconNode:l=[]}=e;const p=(...c)=>c.filter((y,F,k)=>!!y&&k.indexOf(y)===F).join(" ");return r.$$set=c=>{t(8,e=ae(ae({},e),Se(c))),t(7,a=ke(e,n)),"name"in c&&t(0,f=c.name),"color"in c&&t(1,b=c.color),"size"in c&&t(2,h=c.size),"strokeWidth"in c&&t(3,w=c.strokeWidth),"absoluteStrokeWidth"in c&&t(4,m=c.absoluteStrokeWidth),"iconNode"in c&&t(5,l=c.iconNode),"$$scope"in c&&t(9,i=c.$$scope)},e=Se(e),[f,b,h,w,m,l,p,a,e,i,u]}class wr extends ct{constructor(e){super(),dt(this,e,St,kt,qe,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}const he=r=>r.replace(/\/$/,""),Tr=(r,e)=>{const t=he(r),n=e.includes(te)?he(e):he(`${te}${e}`);return n==te?t==te:t.includes(n)},Er=r=>r[0].toUpperCase()+r.slice(1),Nr=(r,e)=>Object.keys(r).reduce((t,n)=>(e.includes(n)||(t[n]=r[n]),t),{}),kr=r=>r?(r==null?void 0:r.name)||(r==null?void 0:r.title)||(r==null?void 0:r.email)||(r==null?void 0:r.id):"Unknown";function Xe(r){return new Promise(e=>setTimeout(e,r))}const Ye=()=>typeof window<"u";function Ft(){const r=navigator.userAgentData;return(r==null?void 0:r.platform)??navigator.platform}const Ze=r=>Ye()&&r.test(Ft().toLowerCase()),Pt=()=>Ye()&&!!navigator.maxTouchPoints,Ot=()=>Ze(/^mac/)&&!Pt(),Dt=()=>Ze(/mac|iphone|ipad|ipod/i),Ct=()=>Dt()&&!Ot(),pe="data-melt-scroll-lock";function Le(r,e){if(!r)return;const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function It(r,e,t){if(!r)return;const n=r.style.getPropertyValue(e);return r.style.setProperty(e,t),()=>{n?r.style.setProperty(e,n):r.style.removeProperty(e)}}function Rt(r){const e=r.getBoundingClientRect().left;return Math.round(e)+r.scrollLeft?"paddingLeft":"paddingRight"}function At(r){const e=document,t=e.defaultView??window,{documentElement:n,body:a}=e;if(a.hasAttribute(pe))return C;a.setAttribute(pe,"");const i=t.innerWidth-n.clientWidth,f=()=>It(n,"--scrollbar-width",`${i}px`),b=Rt(n),h=t.getComputedStyle(a)[b],w=()=>Le(a,{overflow:"hidden",[b]:`calc(${h} + ${i}px)`}),m=()=>{const{scrollX:p,scrollY:c,visualViewport:y}=t,F=(y==null?void 0:y.offsetLeft)??0,k=(y==null?void 0:y.offsetTop)??0,P=Le(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(k))}px`,left:`${-(p-Math.floor(F))}px`,right:"0",[b]:`calc(${h} + ${i}px)`});return()=>{P==null||P(),t.scrollTo(p,c)}},l=[f(),Ct()?m():w()];return()=>{l.forEach(p=>p==null?void 0:p()),a.removeAttribute(pe)}}function Lt(r){let e=r.parentElement;for(;x(e)&&!e.hasAttribute("data-portal");)e=e.parentElement;return e||"body"}function _t(r,e){return e!==void 0?e:Lt(r)==="body"?document.body:null}async function _e(r){const{prop:e,defaultEl:t}=r;if(await Promise.all([Xe(1),Te]),e===void 0){t==null||t.focus();return}const n=bt(e)?e(t):e;if(typeof n=="string"){const a=document.querySelector(n);if(!x(a))return;a.focus()}else x(n)&&n.focus()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Qe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],se=Qe.join(","),Je=typeof Element>"u",W=Je?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ue=!Je&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},le=function r(e,t){var n;t===void 0&&(t=!0);var a=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),u=a===""||a==="true",i=u||t&&e&&r(e.parentNode);return i},Bt=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},$e=function(e,t,n){if(le(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(se));return t&&W.call(e,se)&&a.unshift(e),a=a.filter(n),a},et=function r(e,t,n){for(var a=[],u=Array.from(e);u.length;){var i=u.shift();if(!le(i,!1))if(i.tagName==="SLOT"){var f=i.assignedElements(),b=f.length?f:i.children,h=r(b,!0,n);n.flatten?a.push.apply(a,h):a.push({scopeParent:i,candidates:h})}else{var w=W.call(i,se);w&&n.filter(i)&&(t||!e.includes(i))&&a.push(i);var m=i.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(i),l=!le(m,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(i));if(m&&l){var p=r(m===!0?i.children:m.children,!0,n);n.flatten?a.push.apply(a,p):a.push({scopeParent:i,candidates:p})}else u.unshift.apply(u,i.children)}}return a},tt=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},K=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Bt(e))&&!tt(e)?0:e.tabIndex},Mt=function(e,t){var n=K(e);return n<0&&t&&!tt(e)?0:n},Kt=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},rt=function(e){return e.tagName==="INPUT"},Wt=function(e){return rt(e)&&e.type==="hidden"},jt=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},Ut=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},xt=function(e){if(!e.name)return!0;var t=e.form||ue(e),n=function(f){return t.querySelectorAll('input[type="radio"][name="'+f+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=n(window.CSS.escape(e.name));else try{a=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var u=Ut(a,e.form);return!u||u===e},qt=function(e){return rt(e)&&e.type==="radio"},Gt=function(e){return qt(e)&&!xt(e)},zt=function(e){var t,n=e&&ue(e),a=(t=n)===null||t===void 0?void 0:t.host,u=!1;if(n&&n!==e){var i,f,b;for(u=!!((i=a)!==null&&i!==void 0&&(f=i.ownerDocument)!==null&&f!==void 0&&f.contains(a)||e!=null&&(b=e.ownerDocument)!==null&&b!==void 0&&b.contains(e));!u&&a;){var h,w,m;n=ue(a),a=(h=n)===null||h===void 0?void 0:h.host,u=!!((w=a)!==null&&w!==void 0&&(m=w.ownerDocument)!==null&&m!==void 0&&m.contains(a))}}return u},Be=function(e){var t=e.getBoundingClientRect(),n=t.width,a=t.height;return n===0&&a===0},Vt=function(e,t){var n=t.displayCheck,a=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=W.call(e,"details>summary:first-of-type"),i=u?e.parentElement:e;if(W.call(i,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof a=="function"){for(var f=e;e;){var b=e.parentElement,h=ue(e);if(b&&!b.shadowRoot&&a(b)===!0)return Be(e);e.assignedSlot?e=e.assignedSlot:!b&&h!==e.ownerDocument?e=h.host:e=b}e=f}if(zt(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return Be(e);return!1},Ht=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var a=t.children.item(n);if(a.tagName==="LEGEND")return W.call(t,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}t=t.parentElement}return!1},ce=function(e,t){return!(t.disabled||le(t)||Wt(t)||Vt(t,e)||jt(t)||Ht(t))},ye=function(e,t){return!(Gt(t)||K(t)<0||!ce(e,t))},Xt=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Yt=function r(e){var t=[],n=[];return e.forEach(function(a,u){var i=!!a.scopeParent,f=i?a.scopeParent:a,b=Mt(f,i),h=i?r(a.candidates):f;b===0?i?t.push.apply(t,h):t.push(f):n.push({documentOrder:u,tabIndex:b,item:a,isScope:i,content:h})}),n.sort(Kt).reduce(function(a,u){return u.isScope?a.push.apply(a,u.content):a.push(u.content),a},[]).concat(t)},Zt=function(e,t){t=t||{};var n;return t.getShadowRoot?n=et([e],t.includeContainer,{filter:ye.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Xt}):n=$e(e,t.includeContainer,ye.bind(null,t)),Yt(n)},Qt=function(e,t){t=t||{};var n;return t.getShadowRoot?n=et([e],t.includeContainer,{filter:ce.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=$e(e,t.includeContainer,ce.bind(null,t)),n},U=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return W.call(e,se)===!1?!1:ye(t,e)},Jt=Qe.concat("iframe").join(","),me=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return W.call(e,Jt)===!1?!1:ce(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Me(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Me(Object(t),!0).forEach(function(n){$t(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function $t(r,e,t){return e=tr(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function er(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function tr(r){var e=er(r,"string");return typeof e=="symbol"?e:String(e)}var We={activateTrap:function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var a=e.indexOf(t);a===-1||e.splice(a,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},rr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},nr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},X=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},ar=function(e){return X(e)&&!e.shiftKey},ir=function(e){return X(e)&&e.shiftKey},je=function(e){return setTimeout(e,0)},Ue=function(e,t){var n=-1;return e.every(function(a,u){return t(a)?(n=u,!1):!0}),n},V=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return typeof e=="function"?e.apply(void 0,n):e},re=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},or=[],sr=function(e,t){var n=(t==null?void 0:t.document)||document,a=(t==null?void 0:t.trapStack)||or,u=Ke({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ar,isKeyBackward:ir},t),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},f,b=function(s,o,v){return s&&s[o]!==void 0?s[o]:u[v||o]},h=function(s,o){var v=typeof(o==null?void 0:o.composedPath)=="function"?o.composedPath():void 0;return i.containerGroups.findIndex(function(g){var T=g.container,E=g.tabbableNodes;return T.contains(s)||(v==null?void 0:v.includes(T))||E.find(function(N){return N===s})})},w=function(s){var o=u[s];if(typeof o=="function"){for(var v=arguments.length,g=new Array(v>1?v-1:0),T=1;T<v;T++)g[T-1]=arguments[T];o=o.apply(void 0,g)}if(o===!0&&(o=void 0),!o){if(o===void 0||o===!1)return o;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var E=o;if(typeof o=="string"&&(E=n.querySelector(o),!E))throw new Error("`".concat(s,"` as selector refers to no known node"));return E},m=function(){var s=w("initialFocus");if(s===!1)return!1;if(s===void 0||!me(s,u.tabbableOptions))if(h(n.activeElement)>=0)s=n.activeElement;else{var o=i.tabbableGroups[0],v=o&&o.firstTabbableNode;s=v||w("fallbackFocus")}if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s},l=function(){if(i.containerGroups=i.containers.map(function(s){var o=Zt(s,u.tabbableOptions),v=Qt(s,u.tabbableOptions),g=o.length>0?o[0]:void 0,T=o.length>0?o[o.length-1]:void 0,E=v.find(function(D){return U(D)}),N=v.slice().reverse().find(function(D){return U(D)}),S=!!o.find(function(D){return K(D)>0});return{container:s,tabbableNodes:o,focusableNodes:v,posTabIndexesFound:S,firstTabbableNode:g,lastTabbableNode:T,firstDomTabbableNode:E,lastDomTabbableNode:N,nextTabbableNode:function(L){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,I=o.indexOf(L);return I<0?G?v.slice(v.indexOf(L)+1).find(function(z){return U(z)}):v.slice(0,v.indexOf(L)).reverse().find(function(z){return U(z)}):o[I+(G?1:-1)]}}}),i.tabbableGroups=i.containerGroups.filter(function(s){return s.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!w("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(i.containerGroups.find(function(s){return s.posTabIndexesFound})&&i.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},p=function d(s){var o=s.activeElement;if(o)return o.shadowRoot&&o.shadowRoot.activeElement!==null?d(o.shadowRoot):o},c=function d(s){if(s!==!1&&s!==p(document)){if(!s||!s.focus){d(m());return}s.focus({preventScroll:!!u.preventScroll}),i.mostRecentlyFocusedNode=s,rr(s)&&s.select()}},y=function(s){var o=w("setReturnFocus",s);return o||(o===!1?!1:s)},F=function(s){var o=s.target,v=s.event,g=s.isBackward,T=g===void 0?!1:g;o=o||re(v),l();var E=null;if(i.tabbableGroups.length>0){var N=h(o,v),S=N>=0?i.containerGroups[N]:void 0;if(N<0)T?E=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:E=i.tabbableGroups[0].firstTabbableNode;else if(T){var D=Ue(i.tabbableGroups,function(fe){var ve=fe.firstTabbableNode;return o===ve});if(D<0&&(S.container===o||me(o,u.tabbableOptions)&&!U(o,u.tabbableOptions)&&!S.nextTabbableNode(o,!1))&&(D=N),D>=0){var L=D===0?i.tabbableGroups.length-1:D-1,G=i.tabbableGroups[L];E=K(o)>=0?G.lastTabbableNode:G.lastDomTabbableNode}else X(v)||(E=S.nextTabbableNode(o,!1))}else{var I=Ue(i.tabbableGroups,function(fe){var ve=fe.lastTabbableNode;return o===ve});if(I<0&&(S.container===o||me(o,u.tabbableOptions)&&!U(o,u.tabbableOptions)&&!S.nextTabbableNode(o))&&(I=N),I>=0){var z=I===i.tabbableGroups.length-1?0:I+1,Ne=i.tabbableGroups[z];E=K(o)>=0?Ne.firstTabbableNode:Ne.firstDomTabbableNode}else X(v)||(E=S.nextTabbableNode(o))}}else E=w("fallbackFocus");return E},k=function(s){var o=re(s);if(!(h(o,s)>=0)){if(V(u.clickOutsideDeactivates,s)){f.deactivate({returnFocus:u.returnFocusOnDeactivate});return}V(u.allowOutsideClick,s)||s.preventDefault()}},P=function(s){var o=re(s),v=h(o,s)>=0;if(v||o instanceof Document)v&&(i.mostRecentlyFocusedNode=o);else{s.stopImmediatePropagation();var g,T=!0;if(i.mostRecentlyFocusedNode)if(K(i.mostRecentlyFocusedNode)>0){var E=h(i.mostRecentlyFocusedNode),N=i.containerGroups[E].tabbableNodes;if(N.length>0){var S=N.findIndex(function(D){return D===i.mostRecentlyFocusedNode});S>=0&&(u.isKeyForward(i.recentNavEvent)?S+1<N.length&&(g=N[S+1],T=!1):S-1>=0&&(g=N[S-1],T=!1))}}else i.containerGroups.some(function(D){return D.tabbableNodes.some(function(L){return K(L)>0})})||(T=!1);else T=!1;T&&(g=F({target:i.mostRecentlyFocusedNode,isBackward:u.isKeyBackward(i.recentNavEvent)})),c(g||i.mostRecentlyFocusedNode||m())}i.recentNavEvent=void 0},O=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i.recentNavEvent=s;var v=F({event:s,isBackward:o});v&&(X(s)&&s.preventDefault(),c(v))},R=function(s){if(nr(s)&&V(u.escapeDeactivates,s)!==!1){s.preventDefault(),f.deactivate();return}(u.isKeyForward(s)||u.isKeyBackward(s))&&O(s,u.isKeyBackward(s))},Z=function(s){var o=re(s);h(o,s)>=0||V(u.clickOutsideDeactivates,s)||V(u.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())},Q=function(){if(i.active)return We.activateTrap(a,f),i.delayInitialFocusTimer=u.delayInitialFocus?je(function(){c(m())}):c(m()),n.addEventListener("focusin",P,!0),n.addEventListener("mousedown",k,{capture:!0,passive:!1}),n.addEventListener("touchstart",k,{capture:!0,passive:!1}),n.addEventListener("click",Z,{capture:!0,passive:!1}),n.addEventListener("keydown",R,{capture:!0,passive:!1}),f},J=function(){if(i.active)return n.removeEventListener("focusin",P,!0),n.removeEventListener("mousedown",k,!0),n.removeEventListener("touchstart",k,!0),n.removeEventListener("click",Z,!0),n.removeEventListener("keydown",R,!0),f},de=function(s){var o=s.some(function(v){var g=Array.from(v.removedNodes);return g.some(function(T){return T===i.mostRecentlyFocusedNode})});o&&c(m())},q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(de):void 0,A=function(){q&&(q.disconnect(),i.active&&!i.paused&&i.containers.map(function(s){q.observe(s,{subtree:!0,childList:!0})}))};return f={get active(){return i.active},get paused(){return i.paused},activate:function(s){if(i.active)return this;var o=b(s,"onActivate"),v=b(s,"onPostActivate"),g=b(s,"checkCanFocusTrap");g||l(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=n.activeElement,o==null||o();var T=function(){g&&l(),Q(),A(),v==null||v()};return g?(g(i.containers.concat()).then(T,T),this):(T(),this)},deactivate:function(s){if(!i.active)return this;var o=Ke({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},s);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,J(),i.active=!1,i.paused=!1,A(),We.deactivateTrap(a,f);var v=b(o,"onDeactivate"),g=b(o,"onPostDeactivate"),T=b(o,"checkCanReturnFocus"),E=b(o,"returnFocus","returnFocusOnDeactivate");v==null||v();var N=function(){je(function(){E&&c(y(i.nodeFocusedBeforeActivation)),g==null||g()})};return E&&T?(T(y(i.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(s){if(i.paused||!i.active)return this;var o=b(s,"onPause"),v=b(s,"onPostPause");return i.paused=!0,o==null||o(),J(),A(),v==null||v(),this},unpause:function(s){if(!i.paused||!i.active)return this;var o=b(s,"onUnpause"),v=b(s,"onPostUnpause");return i.paused=!1,o==null||o(),l(),Q(),A(),v==null||v(),this},updateContainerElements:function(s){var o=[].concat(s).filter(Boolean);return i.containers=o.map(function(v){return typeof v=="string"?n.querySelector(v):v}),i.active&&l(),A(),this}},f.updateContainerElements(e),f};function ur(r={}){let e;const{immediate:t,...n}=r,a=ge(!1),u=ge(!1),i=m=>e==null?void 0:e.activate(m),f=m=>{e==null||e.deactivate(m)},b=()=>{e&&(e.pause(),u.set(!0))},h=()=>{e&&(e.unpause(),u.set(!1))};return{useFocusTrap:m=>(e=sr(m,{...n,onActivate(){var l;a.set(!0),(l=r.onActivate)==null||l.call(r)},onDeactivate(){var l;a.set(!1),(l=r.onDeactivate)==null||l.call(r)}}),t&&i(),{destroy(){f(),e=void 0}}),hasFocus:Ce(a),isPaused:Ce(u),activate:i,deactivate:f,pause:b,unpause:h}}const ne=[],lr=(r,e)=>{let t=C;function n(){const u=ne.indexOf(r);u>=0&&ne.splice(u,1)}function a(u){t();const{open:i,onClose:f,shouldCloseOnInteractOutside:b,closeOnInteractOutside:h}=u;Xe(100).then(()=>{i?ne.push(r):n()});function w(){return ht(ne)===r}function m(){w()&&f&&(f(),n())}function l(c){const y=c.target;Ee(y)&&y&&w()&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation())}function p(c){b!=null&&b(c)&&w()&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),m())}t=dr(r,{onInteractOutsideStart:l,onInteractOutside:h?p:void 0,enabled:i}).destroy}return a(e),{update:a,destroy(){n(),t()}}},cr=(r,e="body")=>{let t;if(!x(e)&&typeof e!="string")return{destroy:C};async function n(u){if(e=u,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await Te(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);r.dataset.portal="",t.appendChild(r),r.hidden=!1}function a(){r.remove()}return n(e),{update:n,destroy:a}},dr=(r,e)=>{let t=C,n=C,a=!1,u=!1,i=!1;function f(w){t(),n();const{onInteractOutside:m,onInteractOutsideStart:l,enabled:p}=w;if(!p)return;function c(k){m&&xe(k,r)&&(l==null||l(k));const P=k.target;Ee(P)&&nt(r,P)&&(u=!0),a=!0}function y(k){m==null||m(k)}const F=fr(r);if(typeof PointerEvent<"u"){const k=P=>{n();const O=R=>{b(R)&&y(R),h()};if(P.pointerType==="touch"){n=_(F,"click",O,{capture:!0,once:!0});return}O(P)};t=H(_(F,"pointerdown",c,!0),_(F,"pointerup",k,!0))}else{const k=O=>{i?i=!1:b(O)&&y(O),h()},P=O=>{i=!0,b(O)&&y(O),h()};t=H(_(F,"mousedown",c,!0),_(F,"mouseup",k,!0),_(F,"touchstart",c,!0),_(F,"touchend",P,!0))}}function b(w){return!!(a&&!u&&xe(w,r))}function h(){a=!1,u=!1}return f(e),{update:f,destroy(){t(),n()}}};function xe(r,e){if("button"in r&&r.button>0)return!1;const t=r.target;if(!Ee(t))return!1;const n=t.ownerDocument;return!n||!n.documentElement.contains(t)?!1:e&&!nt(e,t)}function nt(r,e){return r===e||r.contains(e)}function fr(r){return(r==null?void 0:r.ownerDocument)??document}const{name:M}=Tt("dialog"),vr={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},br=["content","title","description"];function Sr(r){const e={...vr,...r},t=Pe(pt(e,"ids")),{preventScroll:n,closeOnEscape:a,closeOnOutsideClick:u,role:i,portal:f,forceVisible:b,openFocus:h,closeFocus:w,onOutsideClick:m}=t,l=mt.writable(null),p=Pe({...gt(br),...e.ids}),c=e.open??ge(e.defaultOpen),y=yt(c,e==null?void 0:e.onOpenChange),F=Nt([y,b],([d,s])=>d||s);let k=C;function P(d){const s=d.currentTarget,o=d.currentTarget;!x(s)||!x(o)||(y.set(!0),l.set(o))}function O(){y.set(!1),_e({prop:w.get(),defaultEl:l.get()})}const R=B(M("trigger"),{stores:[y],returned:([d])=>({"aria-haspopup":"dialog","aria-expanded":d,type:"button"}),action:d=>({destroy:H($(d,"click",o=>{P(o)}),$(d,"keydown",o=>{o.key!==ee.ENTER&&o.key!==ee.SPACE||(o.preventDefault(),P(o))}))})}),Z=B(M("overlay"),{stores:[F,y],returned:([d,s])=>({hidden:d?void 0:!0,tabindex:-1,style:Oe({display:d?void 0:"none"}),"aria-hidden":!0,"data-state":s?"open":"closed"}),action:d=>{let s=C;if(a.get()){const o=De(d,{handler:()=>{O()}});o&&o.destroy&&(s=o.destroy)}return{destroy(){s()}}}}),Q=B(M("content"),{stores:[F,p.content,p.description,p.title,y],returned:([d,s,o,v,g])=>({id:s,role:i.get(),"aria-describedby":o,"aria-labelledby":v,"aria-modal":d?"true":void 0,"data-state":g?"open":"closed",tabindex:-1,hidden:d?void 0:!0,style:Oe({display:d?void 0:"none"})}),action:d=>{let s=C,o=C;const v=H(j([y,u,a],([g,T,E])=>{if(!g)return;const N=ur({immediate:!1,escapeDeactivates:E,clickOutsideDeactivates:T,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:d});s=N.activate,o=N.deactivate;const S=N.useFocusTrap(d);return S&&S.destroy?S.destroy:N.deactivate}),j([u,y],([g,T])=>lr(d,{open:T,closeOnInteractOutside:g,onClose(){O()},shouldCloseOnInteractOutside(E){var N;return(N=m.get())==null||N(E),!E.defaultPrevented}}).destroy),j([a],([g])=>g?De(d,{handler:O}).destroy:C),j([F],([g])=>{Te().then(()=>{g?s():o()})}));return{destroy:()=>{k(),v()}}}}),J=B(M("portalled"),{stores:f,returned:d=>({"data-portal":wt(d)}),action:d=>{const s=j([f],([o])=>{if(o===null)return C;const v=_t(d,o);return v===null?C:cr(d,v).destroy});return{destroy(){s()}}}}),de=B(M("title"),{stores:[p.title],returned:([d])=>({id:d})}),q=B(M("description"),{stores:[p.description],returned:([d])=>({id:d})}),A=B(M("close"),{returned:()=>({type:"button"}),action:d=>({destroy:H($(d,"click",()=>{O()}),$(d,"keydown",o=>{o.key!==ee.SPACE&&o.key!==ee.ENTER||(o.preventDefault(),O())}))})});return j([y,n],([d,s])=>{if(Et){if(s&&d&&(k=At()),d){const o=document.getElementById(p.content.get());_e({prop:h.get(),defaultEl:o})}return()=>{b.get()||k()}}}),{ids:p,elements:{content:Q,trigger:R,title:de,description:q,overlay:Z,close:A,portalled:J},states:{open:y},options:t}}function Fr(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=n)}return e}function Pr(r){return function(e,t){if(t===void 0)return;const n=r[e];n&&n.set(t)}}export{wr as I,Tr as a,he as b,Sr as c,ur as d,lr as e,_t as f,Pr as g,_e as h,At as i,Er as j,kr as k,Nr as l,Fr as r,Xe as s,cr as u};
