import{B as x,a as ee,p as y}from"../chunks/index.XPQK783o.js";import{s as q,e as $,c as b,b as w,f as h,m as g,i as I,p as te,k as se,N as U,a as j,t as ne,g as A,d as ae,h as k,j as le,P as oe,w as N,x as M,z,D as C,E as F,F as H}from"../chunks/scheduler.CJbnQW4F.js";import{S as B,i as L,t as d,g as O,e as T,b as p,c as E,a as S,m as V,d as D,f as re,h as ie}from"../chunks/index.BMuCI7Kc.js";import{b as G,o as ce}from"../chunks/entry.BDTbVyTm.js";import{e as J,b as P,h as fe,g as X,d as Y}from"../chunks/events.BEg6mR46.js";import"../chunks/index.CKdzfLQ1.js";import{p as ue}from"../chunks/stores.QwtFnJkV.js";import{a as me,I as Z}from"../chunks/updater.DB4DGOD9.js";function K(o,e,l){const n=o.slice();return n[6]=e[l],n}function Q(o){let e,l,n,s;return{c(){e=$("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),w(e).forEach(h),this.h()},h(){g(e,"class","absolute inset-0 rounded-md bg-primary")},m(t,i){I(t,e,i),s=!0},i(t){s||(t&&oe(()=>{s&&(n&&n.end(1),l=re(e,o[3],{key:"active-sidebar-tab"}),l.start())}),s=!0)},o(t){l&&l.invalidate(),t&&(n=ie(e,o[4],{key:"active-sidebar-tab"})),s=!1},d(t){t&&h(e),t&&n&&n.end()}}}function _e(o){let e=o[2](o[6].href),l,n,s,t,i=o[6].title+"",r,f,a,c=e&&Q(o);var m=o[6].icon;function v(u,_){return{props:{class:"inline w-5"}}}return m&&(s=U(m,v())),{c(){c&&c.c(),l=j(),n=$("div"),s&&E(s.$$.fragment),t=j(),r=ne(i),f=j(),this.h()},l(u){c&&c.l(u),l=A(u),n=b(u,"DIV",{class:!0});var _=w(n);s&&S(s.$$.fragment,_),t=A(_),r=ae(_,i),_.forEach(h),f=A(u),this.h()},h(){g(n,"class","relative")},m(u,_){c&&c.m(u,_),I(u,l,_),I(u,n,_),s&&V(s,n,null),k(n,t),k(n,r),I(u,f,_),a=!0},p(u,_){if(_&6&&(e=u[2](u[6].href)),e?c?_&6&&d(c,1):(c=Q(u),c.c(),d(c,1),c.m(l.parentNode,l)):c&&(O(),p(c,1,1,()=>{c=null}),T()),_&2&&m!==(m=u[6].icon)){if(s){O();const R=s;p(R.$$.fragment,1,0,()=>{D(R,1)}),T()}m?(s=U(m,v()),E(s.$$.fragment),d(s.$$.fragment,1),V(s,n,t)):s=null}(!a||_&2)&&i!==(i=u[6].title+"")&&le(r,i)},i(u){a||(d(c),s&&d(s.$$.fragment,u),a=!0)},o(u){p(c),s&&p(s.$$.fragment,u),a=!1},d(u){u&&(h(l),h(n),h(f)),c&&c.d(u),s&&D(s)}}}function W(o){let e,l;return e=new x({props:{href:G+o[6].href,variant:"ghost",class:P(o[2](o[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start"),"data-sveltekit-noscroll":!0,$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){E(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,s){V(e,n,s),l=!0},p(n,s){const t={};s&2&&(t.href=G+n[6].href),s&6&&(t.class=P(n[2](n[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start")),s&518&&(t.$$scope={dirty:s,ctx:n}),e.$set(t)},i(n){l||(d(e.$$.fragment,n),l=!0)},o(n){p(e.$$.fragment,n),l=!1},d(n){D(e,n)}}}function de(o){let e,l,n,s=J(o[1]),t=[];for(let r=0;r<s.length;r+=1)t[r]=W(K(o,s,r));const i=r=>p(t[r],1,1,()=>{t[r]=null});return{c(){e=$("nav");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=b(r,"NAV",{class:!0});var f=w(e);for(let a=0;a<t.length;a+=1)t[a].l(f);f.forEach(h),this.h()},h(){g(e,"class",l=P("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",o[0]))},m(r,f){I(r,e,f);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);n=!0},p(r,[f]){if(f&6){s=J(r[1]);let a;for(a=0;a<s.length;a+=1){const c=K(r,s,a);t[a]?(t[a].p(c,f),d(t[a],1)):(t[a]=W(c),t[a].c(),d(t[a],1),t[a].m(e,null))}for(O(),a=s.length;a<t.length;a+=1)i(a);T()}(!n||f&1&&l!==(l=P("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",r[0])))&&g(e,"class",l)},i(r){if(!n){for(let f=0;f<s.length;f+=1)d(t[f]);n=!0}},o(r){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)p(t[f]);n=!1},d(r){r&&h(e),te(t,r)}}}function he(o,e,l){let n,s;se(o,ue,a=>l(5,s=a));let{class:t=void 0}=e,{items:i}=e;const[r,f]=ee({duration:250,easing:fe});return o.$$set=a=>{"class"in a&&l(0,t=a.class),"items"in a&&l(1,i=a.items)},o.$$.update=()=>{o.$$.dirty&32&&l(2,n=a=>me(s.url.pathname,a))},[t,i,n,r,f,s]}class pe extends B{constructor(e){super(),L(this,e,he,de,q,{class:0,items:1})}}const ge=async({fetch:o})=>{var n;const e=await y.collection("admin_collections").getList(1,500,{fetch:o,sort:"name",filter:y.filter("type = 'base'")});if(e.items.filter(s=>s.type==="base"),console.log(y.isPocketAdmin),console.log(y.pocketAdminRole),console.log(e),y.isPocketAdmin){const s=await y.collection("users").getList(1,500,{fetch:o,expand:"role"});if(s&&s.items){const t=s.items[0];t.name="users",t.type="auth",e.items=[...e.items,...s.items]}}if(!e||!e.items.length)return{collections:[],schema:[]};const l=[...((n=e.items[0])==null?void 0:n.schema)||[]];return{collections:e.items,schema:l}},ve=!1,Oe=Object.freeze(Object.defineProperty({__proto__:null,load:ge,prerender:ve},Symbol.toStringTag,{value:"Module"}));function $e(o){let e;const l=o[2].default,n=z(l,o,o[3],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,t){n&&n.m(s,t),e=!0},p(s,t){n&&n.p&&(!e||t&8)&&C(n,l,s,s[3],e?H(l,s[3],t,null):F(s[3]),null)},i(s){e||(d(n,s),e=!0)},o(s){p(n,s),e=!1},d(s){n&&n.d(s)}}}function be(o){let e,l;const n=[{name:"square-library"},o[1],{iconNode:o[0]}];let s={$$slots:{default:[$e]},$$scope:{ctx:o}};for(let t=0;t<n.length;t+=1)s=N(s,n[t]);return e=new Z({props:s}),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,i){V(e,t,i),l=!0},p(t,[i]){const r=i&3?X(n,[n[0],i&2&&Y(t[1]),i&1&&{iconNode:t[0]}]):{};i&8&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function we(o,e,l){let{$$slots:n={},$$scope:s}=e;const t=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M7 7v10"}],["path",{d:"M11 7v10"}],["path",{d:"m15 7 2 10"}]];return o.$$set=i=>{l(1,e=N(N({},e),M(i))),"$$scope"in i&&l(3,s=i.$$scope)},e=M(e),[t,e,n,s]}class ye extends B{constructor(e){super(),L(this,e,we,be,q,{})}}function ke(o){let e;const l=o[2].default,n=z(l,o,o[3],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,t){n&&n.m(s,t),e=!0},p(s,t){n&&n.p&&(!e||t&8)&&C(n,l,s,s[3],e?H(l,s[3],t,null):F(s[3]),null)},i(s){e||(d(n,s),e=!0)},o(s){p(n,s),e=!1},d(s){n&&n.d(s)}}}function Ie(o){let e,l;const n=[{name:"users"},o[1],{iconNode:o[0]}];let s={$$slots:{default:[ke]},$$scope:{ctx:o}};for(let t=0;t<n.length;t+=1)s=N(s,n[t]);return e=new Z({props:s}),{c(){E(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,i){V(e,t,i),l=!0},p(t,[i]){const r=i&3?X(n,[n[0],i&2&&Y(t[1]),i&1&&{iconNode:t[0]}]):{};i&8&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function Ne(o,e,l){let{$$slots:n={},$$scope:s}=e;const t=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}]];return o.$$set=i=>{l(1,e=N(N({},e),M(i))),"$$scope"in i&&l(3,s=i.$$scope)},e=M(e),[t,e,n,s]}class Ee extends B{constructor(e){super(),L(this,e,Ne,Ie,q,{})}}function Ve(o){let e,l,n,s,t,i,r;s=new pe({props:{items:o[0]}});const f=o[3].default,a=z(f,o,o[2],null);return{c(){e=$("div"),l=$("aside"),n=$("div"),E(s.$$.fragment),t=j(),i=$("div"),a&&a.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var m=w(e);l=b(m,"ASIDE",{class:!0});var v=w(l);n=b(v,"DIV",{class:!0});var u=w(n);S(s.$$.fragment,u),u.forEach(h),v.forEach(h),t=A(m),i=b(m,"DIV",{class:!0});var _=w(i);a&&a.l(_),_.forEach(h),m.forEach(h),this.h()},h(){g(n,"class","sticky top-0 overflow-y-auto p-4"),g(l,"class","w-full lg:w-52"),g(i,"class","flex-1 overflow-y-auto p-4"),g(e,"class","flex h-full flex-col lg:flex-row")},m(c,m){I(c,e,m),k(e,l),k(l,n),V(s,n,null),k(e,t),k(e,i),a&&a.m(i,null),r=!0},p(c,[m]){a&&a.p&&(!r||m&4)&&C(a,f,c,c[2],r?H(f,c[2],m,null):F(c[2]),null)},i(c){r||(d(s.$$.fragment,c),d(a,c),r=!0)},o(c){p(s.$$.fragment,c),p(a,c),r=!1},d(c){c&&h(e),D(s),a&&a.d(c)}}}function De(o,e,l){let{$$slots:n={},$$scope:s}=e;ce(a=>{const c=document,m=c.startViewTransition;if(typeof m=="function")return new Promise(v=>{m.call(c,async()=>{v(),await a.complete})})});let{data:t}=e;const{collections:i}=t,r=a=>(console.log(a),a=="base"?ye:a=="auth"?Ee:""),f=i.map(a=>({title:a.name,href:`/collections/${a.name}`,icon:r(a.type)}));return o.$$set=a=>{"data"in a&&l(1,t=a.data),"$$scope"in a&&l(2,s=a.$$scope)},[f,t,s,n]}class Te extends B{constructor(e){super(),L(this,e,De,Ve,q,{data:1})}}export{Te as component,Oe as universal};
