import{B as X,a as Y,p as O}from"../chunks/index.BHplDji8.js";import{s as A,e as v,c as $,b,f as d,m as g,i as w,p as Z,k as x,N as T,a as V,t as ee,g as D,d as te,h as y,j as se,P as ae,w as C,x as z,z as Q,D as R,E as U,F as W}from"../chunks/scheduler.CJbnQW4F.js";import{S as B,i as L,t as h,g as P,e as q,b as p,c as I,a as j,m as E,d as N,f as ne,h as le}from"../chunks/index.BMuCI7Kc.js";import{b as F,o as re}from"../chunks/entry.B4TdngOS.js";import{e as G,b as S,d as oe,g as ie,f as ce}from"../chunks/events.DwFK5ZIp.js";import"../chunks/index.D15loTN1.js";import{p as fe}from"../chunks/stores.CAKeC0cK.js";import{a as ue,I as me}from"../chunks/updater.D2OxBVVQ.js";function H(r,e,l){const a=r.slice();return a[6]=e[l],a}function J(r){let e,l,a,s;return{c(){e=v("div"),this.h()},l(t){e=$(t,"DIV",{class:!0}),b(e).forEach(d),this.h()},h(){g(e,"class","absolute inset-0 rounded-md bg-primary")},m(t,c){w(t,e,c),s=!0},i(t){s||(t&&ae(()=>{s&&(a&&a.end(1),l=ne(e,r[3],{key:"active-sidebar-tab"}),l.start())}),s=!0)},o(t){l&&l.invalidate(),t&&(a=le(e,r[4],{key:"active-sidebar-tab"})),s=!1},d(t){t&&d(e),t&&a&&a.end()}}}function _e(r){let e=r[2](r[6].href),l,a,s,t,c=r[6].title+"",o,f,n,i=e&&J(r);var m=r[6].icon;function k(u,_){return{props:{class:"inline w-5"}}}return m&&(s=T(m,k())),{c(){i&&i.c(),l=V(),a=v("div"),s&&I(s.$$.fragment),t=V(),o=ee(c),f=V(),this.h()},l(u){i&&i.l(u),l=D(u),a=$(u,"DIV",{class:!0});var _=b(a);s&&j(s.$$.fragment,_),t=D(_),o=te(_,c),_.forEach(d),f=D(u),this.h()},h(){g(a,"class","relative")},m(u,_){i&&i.m(u,_),w(u,l,_),w(u,a,_),s&&E(s,a,null),y(a,t),y(a,o),w(u,f,_),n=!0},p(u,_){if(_&6&&(e=u[2](u[6].href)),e?i?_&6&&h(i,1):(i=J(u),i.c(),h(i,1),i.m(l.parentNode,l)):i&&(P(),p(i,1,1,()=>{i=null}),q()),_&2&&m!==(m=u[6].icon)){if(s){P();const M=s;p(M.$$.fragment,1,0,()=>{N(M,1)}),q()}m?(s=T(m,k()),I(s.$$.fragment),h(s.$$.fragment,1),E(s,a,t)):s=null}(!n||_&2)&&c!==(c=u[6].title+"")&&se(o,c)},i(u){n||(h(i),s&&h(s.$$.fragment,u),n=!0)},o(u){p(i),s&&p(s.$$.fragment,u),n=!1},d(u){u&&(d(l),d(a),d(f)),i&&i.d(u),s&&N(s)}}}function K(r){let e,l;return e=new X({props:{href:F+r[6].href,variant:"ghost",class:S(r[2](r[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start"),"data-sveltekit-noscroll":!0,$$slots:{default:[_e]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,s){E(e,a,s),l=!0},p(a,s){const t={};s&2&&(t.href=F+a[6].href),s&6&&(t.class=S(a[2](a[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start")),s&518&&(t.$$scope={dirty:s,ctx:a}),e.$set(t)},i(a){l||(h(e.$$.fragment,a),l=!0)},o(a){p(e.$$.fragment,a),l=!1},d(a){N(e,a)}}}function de(r){let e,l,a,s=G(r[1]),t=[];for(let o=0;o<s.length;o+=1)t[o]=K(H(r,s,o));const c=o=>p(t[o],1,1,()=>{t[o]=null});return{c(){e=v("nav");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"NAV",{class:!0});var f=b(e);for(let n=0;n<t.length;n+=1)t[n].l(f);f.forEach(d),this.h()},h(){g(e,"class",l=S("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",r[0]))},m(o,f){w(o,e,f);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);a=!0},p(o,[f]){if(f&6){s=G(o[1]);let n;for(n=0;n<s.length;n+=1){const i=H(o,s,n);t[n]?(t[n].p(i,f),h(t[n],1)):(t[n]=K(i),t[n].c(),h(t[n],1),t[n].m(e,null))}for(P(),n=s.length;n<t.length;n+=1)c(n);q()}(!a||f&1&&l!==(l=S("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",o[0])))&&g(e,"class",l)},i(o){if(!a){for(let f=0;f<s.length;f+=1)h(t[f]);a=!0}},o(o){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)p(t[f]);a=!1},d(o){o&&d(e),Z(t,o)}}}function he(r,e,l){let a,s;x(r,fe,n=>l(5,s=n));let{class:t=void 0}=e,{items:c}=e;const[o,f]=Y({duration:250,easing:oe});return r.$$set=n=>{"class"in n&&l(0,t=n.class),"items"in n&&l(1,c=n.items)},r.$$.update=()=>{r.$$.dirty&32&&l(2,a=n=>ue(s.url.pathname,n))},[t,c,a,o,f,s]}class pe extends B{constructor(e){super(),L(this,e,he,de,A,{class:0,items:1})}}const ge=async({fetch:r})=>{const e=await O.collection("admin_collections").getFullList({fetch:r,sort:"name"}),l=e.filter(c=>c.type==="base"),a=e.find(c=>c.type==="view"&&c.name==="admin_collections");if(!e||!e.length)return{collections:[],schema:[]};const s=await Promise.all(l.map(async c=>{let o=0;try{o=(await O.collection(c.name).getList(1,1,{fetch:r})).totalItems}catch(f){console.log("error",f)}return c.recordsCount=o,c})),t=[...(a==null?void 0:a.schema)||[],{name:"recordsCount",type:"number"}];return{collections:s||[],schema:t}},ve=!1,qe=Object.freeze(Object.defineProperty({__proto__:null,load:ge,prerender:ve},Symbol.toStringTag,{value:"Module"}));function $e(r){let e;const l=r[2].default,a=Q(l,r,r[3],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,t){a&&a.m(s,t),e=!0},p(s,t){a&&a.p&&(!e||t&8)&&R(a,l,s,s[3],e?W(l,s[3],t,null):U(s[3]),null)},i(s){e||(h(a,s),e=!0)},o(s){p(a,s),e=!1},d(s){a&&a.d(s)}}}function be(r){let e,l;const a=[{name:"square-library"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[$e]},$$scope:{ctx:r}};for(let t=0;t<a.length;t+=1)s=C(s,a[t]);return e=new me({props:s}),{c(){I(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,c){E(e,t,c),l=!0},p(t,[c]){const o=c&3?ie(a,[a[0],c&2&&ce(t[1]),c&1&&{iconNode:t[0]}]):{};c&8&&(o.$$scope={dirty:c,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function ye(r,e,l){let{$$slots:a={},$$scope:s}=e;const t=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M7 7v10"}],["path",{d:"M11 7v10"}],["path",{d:"m15 7 2 10"}]];return r.$$set=c=>{l(1,e=C(C({},e),z(c))),"$$scope"in c&&l(3,s=c.$$scope)},e=z(e),[t,e,a,s]}class we extends B{constructor(e){super(),L(this,e,ye,be,A,{})}}function ke(r){let e,l,a,s,t,c,o;s=new pe({props:{items:r[0]}});const f=r[3].default,n=Q(f,r,r[2],null);return{c(){e=v("div"),l=v("aside"),a=v("div"),I(s.$$.fragment),t=V(),c=v("div"),n&&n.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var m=b(e);l=$(m,"ASIDE",{class:!0});var k=b(l);a=$(k,"DIV",{class:!0});var u=b(a);j(s.$$.fragment,u),u.forEach(d),k.forEach(d),t=D(m),c=$(m,"DIV",{class:!0});var _=b(c);n&&n.l(_),_.forEach(d),m.forEach(d),this.h()},h(){g(a,"class","sticky top-0 overflow-y-auto p-4"),g(l,"class","w-full lg:w-52"),g(c,"class","flex-1 overflow-y-auto p-4"),g(e,"class","flex h-full flex-col lg:flex-row")},m(i,m){w(i,e,m),y(e,l),y(l,a),E(s,a,null),y(e,t),y(e,c),n&&n.m(c,null),o=!0},p(i,[m]){n&&n.p&&(!o||m&4)&&R(n,f,i,i[2],o?W(f,i[2],m,null):U(i[2]),null)},i(i){o||(h(s.$$.fragment,i),h(n,i),o=!0)},o(i){p(s.$$.fragment,i),p(n,i),o=!1},d(i){i&&d(e),N(s),n&&n.d(i)}}}function Ie(r,e,l){let{$$slots:a={},$$scope:s}=e;re(f=>{const n=document,i=n.startViewTransition;if(typeof i=="function")return new Promise(m=>{i.call(n,async()=>{m(),await f.complete})})});let{data:t}=e;const{collections:c}=t,o=c.map(f=>({title:f.name,href:`/collections/${f.name}`,icon:f.type=="base"?we:""}));return r.$$set=f=>{"data"in f&&l(1,t=f.data),"$$scope"in f&&l(2,s=f.$$scope)},[o,t,s,a]}class Ae extends B{constructor(e){super(),L(this,e,Ie,ke,A,{data:1})}}export{Ae as component,qe as universal};
