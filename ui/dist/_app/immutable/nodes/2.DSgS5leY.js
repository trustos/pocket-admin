import{B as X,p as O}from"../chunks/index.CzV2kvgO.js";import{s as P,e as v,c as $,b,f as d,m as g,i as y,p as Y,k as Z,R as T,a as V,t as x,g as j,d as ee,h as k,j as te,S as se,r as B,B as z,F as K,H as Q,I as U,J as W}from"../chunks/scheduler.DvhgI56V.js";import{S as q,i as A,t as _,g as D,e as M,b as h,c as I,a as C,m as N,d as S,f as ae,h as ne}from"../chunks/index.cJPS-mTp.js";import{b as F,o as re}from"../chunks/entry.DFeKHh1B.js";import{e as H,a as E,y as le,g as oe,z as ie}from"../chunks/events.CRn_k7UJ.js";import"../chunks/index.Ds8MIeEQ.js";import{c as ce}from"../chunks/index.DvATdlPF.js";import{p as fe}from"../chunks/stores.T6VI2cwI.js";import{e as ue,I as me}from"../chunks/updater.iZaATlbZ.js";function J(o,t,r){const s=o.slice();return s[6]=t[r],s}function R(o){let t,r,s,a;return{c(){t=v("div"),this.h()},l(e){t=$(e,"DIV",{class:!0}),b(t).forEach(d),this.h()},h(){g(t,"class","absolute inset-0 rounded-md bg-primary")},m(e,c){y(e,t,c),a=!0},i(e){a||(e&&se(()=>{a&&(s&&s.end(1),r=ae(t,o[3],{key:"active-sidebar-tab"}),r.start())}),a=!0)},o(e){r&&r.invalidate(),e&&(s=ne(t,o[4],{key:"active-sidebar-tab"})),a=!1},d(e){e&&d(t),e&&s&&s.end()}}}function _e(o){let t=o[2](o[6].href),r,s,a,e,c=o[6].title+"",i,l,n,f=t&&R(o);var p=o[6].icon;function w(u,m){return{props:{class:"inline w-5"}}}return p&&(a=T(p,w())),{c(){f&&f.c(),r=V(),s=v("div"),a&&I(a.$$.fragment),e=V(),i=x(c),l=V(),this.h()},l(u){f&&f.l(u),r=j(u),s=$(u,"DIV",{class:!0});var m=b(s);a&&C(a.$$.fragment,m),e=j(m),i=ee(m,c),m.forEach(d),l=j(u),this.h()},h(){g(s,"class","relative")},m(u,m){f&&f.m(u,m),y(u,r,m),y(u,s,m),a&&N(a,s,null),k(s,e),k(s,i),y(u,l,m),n=!0},p(u,m){if(m&6&&(t=u[2](u[6].href)),t?f?m&6&&_(f,1):(f=R(u),f.c(),_(f,1),f.m(r.parentNode,r)):f&&(D(),h(f,1,1,()=>{f=null}),M()),m&2&&p!==(p=u[6].icon)){if(a){D();const L=a;h(L.$$.fragment,1,0,()=>{S(L,1)}),M()}p?(a=T(p,w()),I(a.$$.fragment),_(a.$$.fragment,1),N(a,s,e)):a=null}(!n||m&2)&&c!==(c=u[6].title+"")&&te(i,c)},i(u){n||(_(f),a&&_(a.$$.fragment,u),n=!0)},o(u){h(f),a&&h(a.$$.fragment,u),n=!1},d(u){u&&(d(r),d(s),d(l)),f&&f.d(u),a&&S(a)}}}function G(o){let t,r;return t=new X({props:{href:F+o[6].href,variant:"ghost",class:E(o[2](o[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start hover:bg-gray-200"),"data-sveltekit-noscroll":!0,$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){I(t.$$.fragment)},l(s){C(t.$$.fragment,s)},m(s,a){N(t,s,a),r=!0},p(s,a){const e={};a&2&&(e.href=F+s[6].href),a&6&&(e.class=E(s[2](s[6].href)?"text-primary-foreground hover:text-primary-foreground":"","relative justify-start hover:bg-gray-200")),a&518&&(e.$$scope={dirty:a,ctx:s}),t.$set(e)},i(s){r||(_(t.$$.fragment,s),r=!0)},o(s){h(t.$$.fragment,s),r=!1},d(s){S(t,s)}}}function de(o){let t,r,s,a=H(o[1]),e=[];for(let i=0;i<a.length;i+=1)e[i]=G(J(o,a,i));const c=i=>h(e[i],1,1,()=>{e[i]=null});return{c(){t=v("nav");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=$(i,"NAV",{class:!0});var l=b(t);for(let n=0;n<e.length;n+=1)e[n].l(l);l.forEach(d),this.h()},h(){g(t,"class",r=E("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",o[0]))},m(i,l){y(i,t,l);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null);s=!0},p(i,[l]){if(l&6){a=H(i[1]);let n;for(n=0;n<a.length;n+=1){const f=J(i,a,n);e[n]?(e[n].p(f,l),_(e[n],1)):(e[n]=G(f),e[n].c(),_(e[n],1),e[n].m(t,null))}for(D(),n=a.length;n<e.length;n+=1)c(n);M()}(!s||l&1&&r!==(r=E("flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-1",i[0])))&&g(t,"class",r)},i(i){if(!s){for(let l=0;l<a.length;l+=1)_(e[l]);s=!0}},o(i){e=e.filter(Boolean);for(let l=0;l<e.length;l+=1)h(e[l]);s=!1},d(i){i&&d(t),Y(e,i)}}}function pe(o,t,r){let s,a;Z(o,fe,n=>r(5,a=n));let{class:e=void 0}=t,{items:c}=t;const[i,l]=ce({duration:250,easing:le});return o.$$set=n=>{"class"in n&&r(0,e=n.class),"items"in n&&r(1,c=n.items)},o.$$.update=()=>{o.$$.dirty&32&&r(2,s=n=>ue(a.url.pathname,n))},[e,c,s,i,l,a]}class he extends q{constructor(t){super(),A(this,t,pe,de,P,{class:0,items:1})}}const ge=async({fetch:o})=>{const t=await O.collection("admin_collections").getFullList({fetch:o}),r=t.filter(c=>c.type==="base"),s=t.find(c=>c.type==="view"&&c.name==="admin_collections");if(!t||!t.length)return{collections:[],schema:[]};const a=await Promise.all(r.map(async c=>{let i=0;try{i=(await O.collection(c.name).getList(1,1,{fetch:o})).totalItems}catch(l){console.log("error",l)}return c.recordsCount=i,c})),e=[...(s==null?void 0:s.schema)||[],{name:"recordsCount",type:"number"}];return{collections:a||[],schema:e}},ve=!1,Pe=Object.freeze(Object.defineProperty({__proto__:null,load:ge,prerender:ve},Symbol.toStringTag,{value:"Module"}));function $e(o){let t;const r=o[2].default,s=K(r,o,o[3],null);return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,e){s&&s.m(a,e),t=!0},p(a,e){s&&s.p&&(!t||e&8)&&Q(s,r,a,a[3],t?W(r,a[3],e,null):U(a[3]),null)},i(a){t||(_(s,a),t=!0)},o(a){h(s,a),t=!1},d(a){s&&s.d(a)}}}function be(o){let t,r;const s=[{name:"square-library"},o[1],{iconNode:o[0]}];let a={$$slots:{default:[$e]},$$scope:{ctx:o}};for(let e=0;e<s.length;e+=1)a=B(a,s[e]);return t=new me({props:a}),{c(){I(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,c){N(t,e,c),r=!0},p(e,[c]){const i=c&3?oe(s,[s[0],c&2&&ie(e[1]),c&1&&{iconNode:e[0]}]):{};c&8&&(i.$$scope={dirty:c,ctx:e}),t.$set(i)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function ye(o,t,r){let{$$slots:s={},$$scope:a}=t;const e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M7 7v10"}],["path",{d:"M11 7v10"}],["path",{d:"m15 7 2 10"}]];return o.$$set=c=>{r(1,t=B(B({},t),z(c))),"$$scope"in c&&r(3,a=c.$$scope)},t=z(t),[e,t,s,a]}class we extends q{constructor(t){super(),A(this,t,ye,be,P,{})}}function ke(o){let t,r,s,a,e,c;s=new he({props:{items:o[0]}});const i=o[3].default,l=K(i,o,o[2],null);return{c(){t=v("main"),r=v("div"),I(s.$$.fragment),a=V(),e=v("div"),l&&l.c(),this.h()},l(n){t=$(n,"MAIN",{class:!0});var f=b(t);r=$(f,"DIV",{class:!0});var p=b(r);C(s.$$.fragment,p),p.forEach(d),a=j(f),e=$(f,"DIV",{class:!0});var w=b(e);l&&l.l(w),w.forEach(d),f.forEach(d),this.h()},h(){g(r,"class","col-span-2"),g(e,"class","col-span-10 overflow-auto"),g(t,"class","grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 lg:grid-cols-12 xl:grid-cols-12")},m(n,f){y(n,t,f),k(t,r),N(s,r,null),k(t,a),k(t,e),l&&l.m(e,null),c=!0},p(n,[f]){l&&l.p&&(!c||f&4)&&Q(l,i,n,n[2],c?W(i,n[2],f,null):U(n[2]),null)},i(n){c||(_(s.$$.fragment,n),_(l,n),c=!0)},o(n){h(s.$$.fragment,n),h(l,n),c=!1},d(n){n&&d(t),S(s),l&&l.d(n)}}}function Ie(o,t,r){let{$$slots:s={},$$scope:a}=t;re(l=>{const n=document,f=n.startViewTransition;if(typeof f=="function")return new Promise(p=>{f.call(n,async()=>{p(),await l.complete})})});let{data:e}=t;const{collections:c}=e,i=c.map(l=>({title:l.name,href:`/collections/${l.name}`,icon:l.type=="base"?we:""}));return o.$$set=l=>{"data"in l&&r(1,e=l.data),"$$scope"in l&&r(2,a=l.$$scope)},[i,e,a,s]}class qe extends q{constructor(t){super(),A(this,t,Ie,ke,P,{data:1})}}export{qe as component,Pe as universal};
